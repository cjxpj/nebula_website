
# 果汁解释器


## 介绍
> 果汁是一个跨平台开发脚本语言  
> 拥有很好的语法糖  
> 帮助你更快更便捷开发网站等服务

### 函数框跟函数说明

> 函数框是存放在指定变量中的，属于局部变量。  
> 函数也是存放在局部变量中的，但是他不属于动态植入，也就是其他触发也能用。

### 全局函数跟函数说明

> 函数是存放在局部变量的  
> 就是说你在这个词库使用外部词库回调  
> 外部词库是使用不到你这个函数的  
> 全局变量就可以，函数优先级比全局函数高  
> 在全局函数跟函数相同情况下会优先触发函数

### 回调内部跟函数说明

> 内部跟函数都属于局部变量中存放的  
> 函数可以使用回调内部，内部也能使用函数同时也能使用全局函数

### 函数支持范围

> 函数可以运行全局函数  
> 但是不能使用局部函数  
> 也就是说不可以触发自己  
> 函数可以回调内部

### 全局函数支持范围

> 全局函数属于绝对底层开发  
> 全局函数不能使用函数跟回调内部  
> 但是他可以使用函数框

### 回调内部支持范围

> 内部可以使用全局函数  
> 同时可以使用函数跟回调自己

### 词库运行优先级机制

~~让变量利用计算读取变量成为特性吧~~

> 编译就是注释跟插入这种  
> 功能行就是跳行  
> 函数就是$$执行的  
> 计算是[1+1]这种  
> 变量是%A%

+ 顺序
    1. 编译
    2. 功能行
    3. 函数
    4. 计算
    5. 变量

#### 支持读取

- 函数
    - 计算
    - 变量

- 计算
    - 变量


## 运行

### 执行


> 词库支持头部在没有触发词情况下执行哦！

```
头部

Main
尾巴
```

### 文本框

> 帮助你更方便的多行文本  
> ,符号可以留空  
> =>后是方便提供多行文本追加需求  
> 因为词库本地没有太多需要换行地方  
> 你可以在=>配合%val:5%进行字符串换行

```
赋予值:文本=>,
a
b
c
<=文本
%赋予值%
```

### 函数框

> 函数框可以帮助你在运行词库时候动态执行词库  
> 可以减少词库回调需求  
> 触发可以留空  
> 触发留空后就会直接运行  
> 函数框也支持获取参数跟括号

```
赋予值:函数=>触发
a
b
c
<=文本
$函数 赋予值 触发$
```

### 循环框

> 更方便的循环  
> %循环%这个变量获取当前循环的次数

```
赋予值:循环=>10
a%循环%
<=循环
```

### 读取数据

> 读是在一个文件储存多个数据的方法

| 需求 | 目录 |
| ---- | ---- |
| 外部读文件 | database |
| 内部读文件 | private |
| 读文件 | public |
| 读 | database |

```
$外部读文件 路径 默认值$
$内部读文件 路径 默认值$
$读文件 路径 默认值$
$读 路径 键 默认值$
```

### 写入数据

> 写是在一个文件储存多个数据的方法

| 需求 | 目录 |
| ---- | ---- |
| 外部写文件 | database |
| 内部写文件 | private |
| 写文件 | public |
| 写 | database |

```
$外部写文件 路径 数据$
$内部写文件 路径 数据$
$写文件 路径 数据$
$写 路径 键 数据$
```

### 回调

> 内部可以放在触发下

```
$回调 试试$

[内部]试试
成功
```

### 赋予值

> 除了单字符赋予值  
> 都支持多字符

```
:$: 执行函数
: 单字符
:: 多字符
::: 绝对
:%: 只读取变量
```

### 注释

> 这个注释是在编译词库时候移除的  
> 跳行时候记得当他不存在

```
// 注释掉内容
```

> 注释执行他跟赋予值一样  
> 但是他不会产生任何数据

```
#:执行
```

### 时间

```
%时间戳%
%毫秒时间戳%
%时间yyyy%
```

### 函数

> 函数优先级比全局函数高哦  
> 全局函数可以在当前使用（词库）  
> 回调时候让其他词库执行到

```
a:b
$ok$
$z%b%$
// 只有这个可以运行
$z%a%$

[全局函数]ok
a

[函数]ok
b

[函数]z%a%
%参数0%
```

### 随机数

> 这里用优先执行计算原理  
> 让变量读取变量  
> 计算这个特性仅限是数字

```
a:1
b:100
%随机数[%a%]-[%b%]%
%随机数1-100%
```

### 特殊符号

| 编号 | 符号 |
| ---- | ---- |
| 0 | $ |
| 1 | % |
| 2 | : |
| 3 | 空格 |
| 4 | \t |
| 5 | \n |
| 6 | ; |
| 7 | [ |
| 8 | ] |
| 9 | _ |

> 可以让你在函数中，不用写多余赋予值，然后用变量传入。

```
$日志 成功 %val:0%$
```

### 计算

> 谁是数学天才呢？
> 支持运算符号
```
加 +
减 -
乘 *
除 /
```

```
[2*(1+1)]
```

### 启动服务器

> 可以让词库开启局域网服务  
> 会返回启动的链接  
> 都是异步启动支持启动多个

```
$启动服务器 localhost:8080$
```

### 文件后缀

> 他可以从文件路径中取出最后的文件后缀

```
$文件后缀 a/a.txt$
```

### 绘图

> 字体在内部文件夹的字体文件夹内  
> 绘图的JSON支持读取**\_变量\_**

| 需求 | 参数 | 所需 |
| ---- | ---- | ---- |
| 图像创建 | 1 | img |
| 创建 | 2 | x/y |
| 颜色 | 4 | R/G/B/A |
| 画字 | 1 | string |
| 字体 | 1 | fileName |
| 大小 | 1 | string:int |
| 画圆 | 2 | x/y |
| 画方 | 4 | x/y/w宽/h高 |
| 贴图 | 5 | img/x/y/w宽/h高 |
| 输出高宽 | 0 | null |
| 输出 | 1 | gif/png/jpg/jpeg |

> 示例仅供参考

```
$全局变量 输出头部 image/png$
JSON:文本=>
[
    {
        "需求": "创建",
        "参数": ["500","500"]
    },
    {
        "需求": "字体",
        "参数": ["font.ttf"]
    },
    {
        "需求": "颜色",
        "参数": ["0","0","0","255"]
    },
    {
        "需求": "背景",
        "参数": []
    },
    {
        "需求": "颜色",
        "参数": ["255","255","255","255"]
    },
    {
        "需求": "画字",
        "参数": ["30","30","A1啊"]
    },
    {
        "需求": "大小",
        "参数": ["100"]
    },
    {
        "需求": "颜色",
        "参数": ["255","0","0","255"]
    },
    {
        "需求": "画字",
        "参数": ["40","150","A1啊"]
    },
    {
        "需求": "颜色",
        "参数": ["255","0","255","255"]
    },
    {
        "需求": "大小",
        "参数": ["50"]
    },
    {
        "需求": "画圆",
        "参数": ["200","200"]
    },
    {
        "需求": "输出",
        "参数": ["png"]
    }
]
<=文本
图:$绘图 %JSON%$
$通信 记录 http://localhost:8080/牢大.jpg$
$通信 发包$
网图:$:$通信 取出结果$
JSON:文本=>
[
    {
        "需求": "创建",
        "参数": ["800","800"]
    },
    {
        "需求": "贴图",
        "参数": ["_图_","100","100","50","50"]
    },
    {
        "需求": "贴图",
        "参数": ["_网图_","200","200","100","100"]
    },
    {
        "需求": "输出",
        "参数": ["png"]
    }
]
<=文本
$绘图 %JSON%$
```

> 获取图片高宽

```
$通信 记录 http://localhost:8080/牢大.jpg$
$通信 发包$
网图:$:$通信 取出结果$
JSON:文本=>
[
    {
        "需求": "图片创建",
        "参数": ["_网图_"]
    },
    {
        "需求": "输出高宽",
        "参数": []
    }
]
<=文本
$绘图 %JSON%$
```

### 输出头部

> 在启动服务器后给词库提供输出头部的方法

```
$全局变量 输出头部 text$
```

### 变量控制

> 全局变量就是在回调时候还在的变量  
> 不是全局的在执行完毕后就没了

```
$全局变量 键 值$
$变量 键 值$
```

### 跳行

> 是在词条局部内跳行  
> 支持读取变量

```
跳行+1
```

```
跳行-1
```



### 判断

> 可以用英语缩写  
> 如果尾是不会终止往下执行的

| 中文 | 英文 |
| ---- | ---- |
| 如果 | if |
| 如果尾 | end |
| 返回如果尾 | else |

> 支持逻辑
```
和 &
或 |
```

> 支持判断
```
大于等于 >=
大于 >
小于等于 <=
小于 <
等于 ==
不等于 !=
```

```
如果:a==a
ok
如果尾
如果:false
a
返回
如果尾
b
```

> 最后返回：okb

### 终止程序

> 会直接停止程序后打印日志

```
$STOP 打印日志$
```

### 替换

| 需求 | 内容 | 替换| 成为 |
| ---- | ---- | ---- | ---- |
| 替换 | 1234 | 1 | 2 |

> 返回2234

```
$替换 替换内容 需要替换 替换后$
```

### 删除文件

| 需求 | 目录 |
| ---- | ---- |
| 删除文件 | database |

```
$删除文件 a.txt$
```

### 删除文件夹

| 需求 | 目录 |
| ---- | ---- |
| 删除文件夹 | database |

```
$删除文件夹 a$
```

### 回调词库

> 异步词库可以配合延迟做调用

| 需求 | 目录 |
| ---- | ---- |
| 外部词库 | database |
| 内部词库 | private |
| 词库 | public |
| 异步词库 | private |

```
$外部词库 文件 触发$
$内部词库 文件 触发$
$词库 文件 触发$
$异步词库 文件 触发$
```

### MD5编码

```
$MD5编码 内容$
```

### basc64

```
$B64编码 内容$
$B64解码 内容$
```

### url

> URL链接编码就是自动识别get参数自动编码  
> 不会影响到链接  
> URL编码是完整编码

```
$URL编码 内容$
$URL编码 内容$
$URL链接编码 url$
$URL链接解码 url$
```

### 存在文件判断

| 需求 | 目录 |
| ---- | ---- |
| 外部存在文件 | database |
| 内部存在文件 | private |
| 存在文件 | public |

```
$外部存在文件 文件$
$内部存在文件 文件$
$存在文件 文件$
```

> 返回true或者false

### 文件列表

> 留空会直接返回全部目录下文件

```
$文件列表$
$文件列表 database$
```

### JSON

> 不会返回数据  
> 记录不是json会报错  
> 配合判断用

```
$JSON 记录 {}$
$JSON 取 键$
$JSON 存 键 值$
$JSON 覆盖 {}$
// 这是给元素追加用的
$JSON 追加 内容$
$JSON 删 键$
```

> 会返回数据
| 需求 | 返回 |
| ---- | ---- |
| 判断 | true/false |
| 长度 | int |
| 取键 | json:元素 |
| 取出 | json/string |
| 元素取出 | json[]/string |

```
$JSON 判断 {}$
$JSON 长度$
$JSON 取键$
$JSON 取值$
$JSON 取出$
```

### 通信

```
$通信 记录 URL$
$通信 GET$
$通信 POST data$
$通信 头部 json/string$
$通信 发包$
$通信 取出$
$通信 取出结果$
```

### 长度

> 文本长度字符串也算作1单位

```
$文本长度 内容$
$长度 内容$
```

### 正则

> 正则匹配只会返回true/false  
> 而且自带^跟$

```
$正则匹配 正则 内容$
$正则 正则 内容$
```

### 截取

```
$截取 abcd 1 2$
```

### 字符定位

> 没有找到会返回-1

```
$查找字 内容 查找内容$
```

### 延迟

> 秒单位

```
$延迟 1$
```

### MD转HTML

> 把MD文本转为HTML显示

```
$MD转HTML 内容$
```

### 系统

> 值留空为读取

```
$系统 键 值$
```

### 日志

```
$日志 成功 内\n容$
$日志 失败 内\n容$
```

### QQ频道机器人

```
$启动机器人 appID token$
```

### 插入词条

> 可以让文本直接插入执行

#### private/dic/a.xy
```
ok

[内部]a
成功
```

#### 你正在运行的词库
```
[插入dic/a]
$回调 a$
```